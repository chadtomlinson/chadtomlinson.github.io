{"componentChunkName":"component---src-templates-blog-post-js","path":"/vm-21042021/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"0f042b3e-9239-5ae4-b24d-e5f3e864b42f","excerpt":"The Ubtunu LTS Hyper-V virtual machine I’ve been using for developing my Gatsby site died because it ran out of storage space. I could rebuild the VM, but I…","html":"<p>The Ubtunu LTS Hyper-V virtual machine I’ve been using for developing my Gatsby site died because it ran out of storage space.</p>\n<p>I could rebuild the VM, but I would loose everything not yet backed up, so the obvious choice was to increase the available storage.</p>\n<p>This is only applicable to Logical Volume Manamgent installations.</p>\n<ol>\n<li>Verify that ubuntu—vg-ubuntu—lv is out of free space.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">df</span> -h</code></pre></div>\n<ol start=\"2\">\n<li>Turn off the VM.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">shutdown</span> -h now</code></pre></div>\n<ol start=\"3\">\n<li>Use Hyper-V Manager to select the Settings of the Virtual Machine, select the Hard Drive option and Edit under Virtual hard disk. Under Choose Action, ensure Expand is selected, then us Configure Disk to increase the size.</li>\n<li>If not using English, override locale settings to avoid issues with non-English locales:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\"><span class=\"token environment constant\">LC_ALL</span></span><span class=\"token operator\">=</span>C</code></pre></div>\n<ol start=\"5\">\n<li>Expand the sda3 partition.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> growpart /dev/sda <span class=\"token number\">3</span></code></pre></div>\n<ol start=\"6\">\n<li>Use pvresize to expand the Physical Volume to fill the partition.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> pvresize /dev/sda3</code></pre></div>\n<ol start=\"7\">\n<li>Use lvextend to expand the Logical Volume to fill the Physical Volume.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> lvextend --extents +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv</code></pre></div>\n<ol start=\"8\">\n<li>Enlarge the mounted file system.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv</code></pre></div>\n<ol start=\"9\">\n<li>Finally verify that more storage is available.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">df</span> -h</code></pre></div>","frontmatter":{"title":"Increasing storage on Ubtunu LTS Hyper-V VM","date":"April 28, 2021","description":"Increasing disk space on Ubtunu LTS Hyper-V VM"}},"previous":{"fields":{"slug":"/banu-history-27042021/"},"frontmatter":{"title":"Banu Merchantman History"}},"next":{"fields":{"slug":"/gatsby-28042021/"},"frontmatter":{"title":"Gatsby Development Environment"}}},"pageContext":{"id":"0f042b3e-9239-5ae4-b24d-e5f3e864b42f","previousPostId":"ea7a3cae-1be2-5777-8421-b7506ac4b728","nextPostId":"f5a7432f-ea6d-5025-8ee5-e85363856c15"}},"staticQueryHashes":["2841359383","3257411868"]}